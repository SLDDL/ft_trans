<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ft_transcendence - Tracker de Progression</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .score-display {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .score-card {
            text-align: center;
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
        }

        .score-number {
            font-size: 2em;
            font-weight: bold;
            display: block;
        }

        .content {
            padding: 30px;
        }

        .phase {
            margin-bottom: 40px;
            border: 2px solid #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
        }

        .phase-header {
            background: #34495e;
            color: white;
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .phase-header:hover {
            background: #2c3e50;
        }

        .phase-content {
            padding: 20px;
            display: none;
        }

        .phase-content.active {
            display: block;
        }

        .module {
            margin-bottom: 25px;
            border: 1px solid #bdc3c7;
            border-radius: 8px;
            overflow: hidden;
        }

        .module-header {
            background: #ecf0f1;
            padding: 15px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .module.major .module-header {
            background: #e8f5e8;
            border-left: 5px solid #27ae60;
        }

        .module.minor .module-header {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
        }

        .task-list {
            padding: 15px;
        }

        .task {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            padding: 10px;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .task:hover {
            background: #f8f9fa;
        }

        .task input[type="checkbox"] {
            margin-right: 12px;
            transform: scale(1.2);
        }

        .task.completed {
            background: #d4edda;
            text-decoration: line-through;
            opacity: 0.7;
        }

        .progress-bar {
            background: #ecf0f1;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
            position: relative;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: 12px;
        }

        .badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .badge.major {
            background: #27ae60;
            color: white;
        }

        .badge.minor {
            background: #ffc107;
            color: #212529;
        }

        .badge.obligatoire {
            background: #e74c3c;
            color: white;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border-left: 5px solid #3498db;
        }

        .toggle-icon {
            transition: transform 0.3s;
        }

        .toggle-icon.rotated {
            transform: rotate(180deg);
        }

        .save-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }

        .save-btn:hover {
            background: #229954;
        }

        .reset-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }

        .reset-btn:hover {
            background: #c0392b;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèì ft_transcendence</h1>
            <p>Tracker de Progression - Style √âvaluation 42</p>
            
            <div class="score-display">
                <div class="score-card">
                    <span class="score-number" id="total-score">0</span>
                    <span>Score Total</span>
                </div>
                <div class="score-card">
                    <span class="score-number" id="obligatoire-score">0</span>
                    <span>Obligatoire (25%)</span>
                </div>
                <div class="score-card">
                    <span class="score-number" id="modules-score">0</span>
                    <span>Modules (75%)</span>
                </div>
                <div class="score-card">
                    <span class="score-number" id="completion-percent">0%</span>
                    <span>Progression</span>
                </div>
            </div>
        </div>

        <div class="content">
            <div class="stats">
                <div class="stat-card">
                    <h3>üìä Statut du Projet</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="main-progress">
                            <span class="progress-text" id="progress-text">0%</span>
                        </div>
                    </div>
                </div>
                <div class="stat-card">
                    <h3>üéØ Objectif</h3>
                    <p><strong>Score minimum :</strong> 25 points</p>
                    <p><strong>Score cible :</strong> 95+ points</p>
                </div>
            </div>

            <div style="text-align: center; margin: 20px 0;">
                <button class="save-btn" onclick="saveProgress()">üíæ Sauvegarder</button>
                <button class="reset-btn" onclick="resetProgress()">üîÑ Reset</button>
            </div>

            <!-- PARTIE OBLIGATOIRE -->
            <div class="phase">
                <div class="phase-header" onclick="togglePhase('obligatoire')">
                    <div>
                        <span class="badge obligatoire">OBLIGATOIRE</span>
                        <strong>Partie Obligatoire (25 points)</strong>
                    </div>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="phase-content" id="obligatoire-content">
                    
                    <div class="module">
                        <div class="module-header">
                            <span>üê≥ Configuration Docker</span>
                            <span id="docker-progress">0/4</span>
                        </div>
                        <div class="task-list">
                            <div class="task">
                                <input type="checkbox" data-category="obligatoire" data-points="6.25">
                                <span>Cr√©er un Dockerfile</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="obligatoire" data-points="6.25">
                                <span>Cr√©er un docker-compose.yml</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="obligatoire" data-points="6.25">
                                <span>Configurer le lancement en une commande</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="obligatoire" data-points="6.25">
                                <span>Tester le d√©ploiement</span>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- MODULES MAJEURS -->
            <div class="phase">
                <div class="phase-header" onclick="togglePhase('modules')">
                    <div>
                        <span class="badge major">MODULES</span>
                        <strong>Modules Choisis (70 points)</strong>
                    </div>
                    <span class="toggle-icon">‚ñº</span>
                </div>
                <div class="phase-content" id="modules-content">
                    
                    <div class="module major">
                        <div class="module-header">
                            <span>‚ö° Module 1: Framework Backend (Fastify)</span>
                            <span id="backend-progress">0/3</span>
                        </div>
                        <div class="task-list">
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="3.33">
                                <span>R√©√©crire l'API en Fastify</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="3.33">
                                <span>Migrer la logique m√©tier</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="3.34">
                                <span>Tests d'int√©gration</span>
                            </div>
                        </div>
                    </div>

                    <div class="module major">
                        <div class="module-header">
                            <span>üë• Module 2: User Management</span>
                            <span id="users-progress">0/5</span>
                        </div>
                        <div class="task-list">
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2">
                                <span>Syst√®me d'inscription/connexion s√©curis√©e</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2">
                                <span>Profils utilisateurs avec avatars</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2">
                                <span>Syst√®me d'amis</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2">
                                <span>Historique des matches</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2">
                                <span>Statistiques utilisateur</span>
                            </div>
                        </div>
                    </div>

                    <div class="module major">
                        <div class="module-header">
                            <span>üåê Module 3: Remote Players</span>
                            <span id="remote-progress">0/4</span>
                        </div>
                        <div class="task-list">
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2.5">
                                <span>WebSockets pour communication temps r√©el</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2.5">
                                <span>Gestion des d√©connexions</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2.5">
                                <span>Synchronisation des √©tats de jeu</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2.5">
                                <span>Gestion du lag r√©seau</span>
                            </div>
                        </div>
                    </div>

                    <div class="module major">
                        <div class="module-header">
                            <span>ü§ñ Module 4: Intelligence Artificielle</span>
                            <span id="ai-progress">0/4</span>
                        </div>
                        <div class="task-list">
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2.5">
                                <span>Algorithme IA (pas A*)</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2.5">
                                <span>Simulation d'input clavier</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2.5">
                                <span>Limitation √† 1 refresh/seconde</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2.5">
                                <span>IA capable de gagner occasionnellement</span>
                            </div>
                        </div>
                    </div>

                    <div class="module major">
                        <div class="module-header">
                            <span>üîê Module 5: 2FA + JWT</span>
                            <span id="security-progress">0/4</span>
                        </div>
                        <div class="task-list">
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2.5">
                                <span>Impl√©mentation JWT</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2.5">
                                <span>Two-Factor Authentication</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2.5">
                                <span>Gestion des sessions s√©curis√©es</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2.5">
                                <span>Validation des tokens</span>
                            </div>
                        </div>
                    </div>

                    <div class="module major">
                        <div class="module-header">
                            <span>üí¨ Module 6: Live Chat</span>
                            <span id="chat-progress">0/5</span>
                        </div>
                        <div class="task-list">
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2">
                                <span>Messages directs entre utilisateurs</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2">
                                <span>Syst√®me de blocage</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2">
                                <span>Invitations aux parties via chat</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2">
                                <span>Notifications de tournoi</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="2">
                                <span>Acc√®s aux profils via chat</span>
                            </div>
                        </div>
                    </div>

                    <div class="module major">
                        <div class="module-header">
                            <span>üéÆ Module 7: Graphics 3D (Babylon.js)</span>
                            <span id="graphics-progress">0/3</span>
                        </div>
                        <div class="task-list">
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="3.33">
                                <span>Migration vers Babylon.js</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="3.33">
                                <span>Effets visuels avanc√©s</span>
                            </div>
                            <div class="task">
                                <input type="checkbox" data-category="modules" data-points="3.34">
                                <span>Interface 3D immersive</span>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration des scores
        const SCORES = {
            obligatoire: 25,
            modules: 70
        };

        // √âtat des t√¢ches
        let taskState = {};

        // Charger l'√©tat sauvegard√©
        function loadProgress() {
            const saved = localStorage.getItem('ft_transcendence_progress');
            if (saved) {
                taskState = JSON.parse(saved);
                // Appliquer l'√©tat aux checkboxes
                Object.keys(taskState).forEach(id => {
                    const checkbox = document.querySelector(`input[data-task-id="${id}"]`);
                    if (checkbox) {
                        checkbox.checked = taskState[id];
                        if (taskState[id]) {
                            checkbox.closest('.task').classList.add('completed');
                        }
                    }
                });
            }
        }

        // Sauvegarder la progression
        function saveProgress() {
            localStorage.setItem('ft_transcendence_progress', JSON.stringify(taskState));
            alert('‚úÖ Progression sauvegard√©e !');
        }

        // Reset la progression
        function resetProgress() {
            if (confirm('‚ö†Ô∏è √ätes-vous s√ªr de vouloir reset toute la progression ?')) {
                localStorage.removeItem('ft_transcendence_progress');
                taskState = {};
                document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                    cb.checked = false;
                    cb.closest('.task').classList.remove('completed');
                });
                updateScores();
                alert('üîÑ Progression reset !');
            }
        }

        // Toggle des phases
        function togglePhase(phaseId) {
            const content = document.getElementById(phaseId + '-content');
            const icon = content.previousElementSibling.querySelector('.toggle-icon');
            
            content.classList.toggle('active');
            icon.classList.toggle('rotated');
        }

        // Calculer et mettre √† jour les scores
        function updateScores() {
            let obligatoireScore = 0;
            let modulesScore = 0;
            let totalTasks = 0;
            let completedTasks = 0;

            document.querySelectorAll('input[type="checkbox"]').forEach((checkbox, index) => {
                // Assigner un ID unique si pas d√©j√† fait
                if (!checkbox.dataset.taskId) {
                    checkbox.dataset.taskId = 'task_' + index;
                }

                const points = parseFloat(checkbox.dataset.points || 0);
                const category = checkbox.dataset.category;
                
                totalTasks++;
                
                if (checkbox.checked) {
                    completedTasks++;
                    if (category === 'obligatoire') {
                        obligatoireScore += points;
                    } else if (category === 'modules') {
                        modulesScore += points;
                    }
                    
                    // Sauvegarder l'√©tat
                    taskState[checkbox.dataset.taskId] = true;
                    checkbox.closest('.task').classList.add('completed');
                } else {
                    taskState[checkbox.dataset.taskId] = false;
                    checkbox.closest('.task').classList.remove('completed');
                }
            });

            const totalScore = obligatoireScore + modulesScore;
            const completionPercent = Math.round((completedTasks / totalTasks) * 100);

            // Mettre √† jour l'affichage
            document.getElementById('total-score').textContent = Math.round(totalScore);
            document.getElementById('obligatoire-score').textContent = Math.round(obligatoireScore);
            document.getElementById('modules-score').textContent = Math.round(modulesScore);
            document.getElementById('completion-percent').textContent = completionPercent + '%';

            // Barre de progression
            const progressBar = document.getElementById('main-progress');
            const progressText = document.getElementById('progress-text');
            progressBar.style.width = completionPercent + '%';
            progressText.textContent = completionPercent + '%';

            // Mettre √† jour les compteurs de modules
            updateModuleCounters();
        }

        // Mettre √† jour les compteurs par module
        function updateModuleCounters() {
            const modules = {
                'docker': 'docker-progress',
                'backend': 'backend-progress',
                'users': 'users-progress',
                'remote': 'remote-progress',
                'ai': 'ai-progress',
                'security': 'security-progress',
                'chat': 'chat-progress',
                'graphics': 'graphics-progress'
            };

            Object.keys(modules).forEach(moduleKey => {
                const counter = document.getElementById(modules[moduleKey]);
                if (counter) {
                    const moduleElement = counter.closest('.module');
                    const checkboxes = moduleElement.querySelectorAll('input[type="checkbox"]');
                    const completed = Array.from(checkboxes).filter(cb => cb.checked).length;
                    counter.textContent = `${completed}/${checkboxes.length}`;
                }
            });
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            // Ajouter les event listeners
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', updateScores);
            });

            // Charger la progression sauvegard√©e
            loadProgress();
            
            // Calculer les scores initiaux
            updateScores();

            // Ouvrir la premi√®re phase par d√©faut
            togglePhase('obligatoire');
        });

        // Sauvegarde automatique toutes les 30 secondes
        setInterval(() => {
            if (Object.keys(taskState).length > 0) {
                localStorage.setItem('ft_transcendence_progress', JSON.stringify(taskState));
            }
        }, 30000);
    </script>
</body>
</html>
